{% extends "base.html" %}
{% block content %}
<h1 class="mb-3">Listado de Farmacias</h1>

<div class="mb-3">
  <a href="{{ url_for('farmacias.nueva') }}" class="btn btn-success">➕ Nueva Farmacia</a>
</div>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Dirección</th>
      <th>Teléfono</th>
      <th>Email</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for f in farmacias %}
    <tr>
      <td>{{ f.id }}</td>
      <td>
        <a href="{{ url_for('farmacias.detalle_farmacia', farmacia_id=f.id) }}">
          <strong>{{ f.nombre }}</strong>
        </a>
      </td>
      <td>{{ f.direccion or '-' }}</td>
      <td>{{ f.telefono or '-' }}</td>
      <td>{{ f.email or '-' }}</td>
      <td>
        <a href="{{ url_for('farmacias.detalle_farmacia', farmacia_id=f.id) }}" 
           class="btn btn-sm btn-secondary">Detalle</a>
        <a href="{{ url_for('farmacias.editar', id=f.id) }}" 
           class="btn btn-sm btn-warning">Editar</a>
        <a href="{{ url_for('farmacias.medicamentos_por_farmacia', farmacia_id=f.id) }}" 
           class="btn btn-sm btn-info">Medicamentos</a>
        <form action="{{ url_for('farmacias.eliminar_farmacia', id=f.id) }}" 
              method="POST" style="display:inline;">
          <button type="submit" class="btn btn-sm btn-danger"
                  onclick="return confirm('¿Eliminar farmacia {{ f.nombre }}?');">
            Eliminar
          </button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr>
      <td colspan="6" class="text-center text-muted">
        No hay farmacias registradas.
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
